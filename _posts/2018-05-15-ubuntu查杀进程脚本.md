---
layout: post
title:  ubuntuæŸ¥æ€è¿›ç¨‹è„šæœ¬
subtitle: å°æ°´ç®¡å’Œblogçš„æ„å»ºè„šæœ¬
date: 2018-05-15 16:53
author: Youga
header-img: https://source.unsplash.com/900x400/?computer,phone,cat,dog
catalog: 	 true
tags:
  - tools
---


å°æ°´ç®¡å’Œblogçš„æ„å»ºè„šæœ¬ã€‚æˆ‘å‘èª“ä»¥åå†ä¹Ÿä¸å­¦`bash`è„šæœ¬äº†ã€‚è¯­æ³•ç¬¦å·å¤ªè¿‡ç”Ÿæ¶©ğŸ’©ğŸ’©ï¼Œæ—©å‰ä¸“é—¨å­¦äº†ä¸€éï¼Œæ­¤åˆ»å·²ç»å¿˜å…‰ã€‚ç”¨ `python` äº¦æˆ– `nodejs`è„šæœ¬æ›¿ä»£å§ã€‚ğŸ˜ 

<!--more-->

### å°æ°´ç®¡è‡ªåŠ¨æ„å»º

- killApp.sh

é€šè¿‡åå­—æˆ–è€…å ç”¨çš„ç«¯å£å·æŸ¥æ€è¿›ç¨‹ã€‚

```bash
killAppByName(){
        if [ -z $# ];then echo 'è¯·æŒ‡å®šä»»åŠ¡.';return; fi
        for app in $@;do
                pid=`ps -ef | grep $app | grep -v "grep" | awk '{print $2}'`
                if [ -z $pid ];then echo "æ‰¾ä¸åˆ°${app}ç›¸å…³è¿›ç¨‹." ; continue; fi
                echo æ‰¾åˆ°${app}ç›¸å…³è¿›ç¨‹ï¼š${pid[@]}
                for id in $pid;do
                kill -9 $id
                echo "æ€æ­»è¿›ç¨‹ + ${id}"
                done
        done
}
killAppByPort(){
        if [ -z $# ];then echo "è¯·æŒ‡å®šç«¯å£ï¼";return;fi
        for port in $@;do
                t_pid=`lsof -n -P -t -i :$port`
                if [ -n "$t_pid" ]
                then
                echo æ‰¾åˆ°å ç”¨${port}ç«¯å£çš„ç¨‹åº[${t_pid}]
                kill -9 $t_pid
                else
                echo ç«¯å£${port}æœªè¢«å ç”¨
                fi
        done
}

```

- rebuildFangtan.sh

æŸ¥æ€è¿›ç¨‹->æ›´æ–°ä»£ç ->ç¼–è¯‘ç¨‹åº->è¿è¡Œç¨‹åº
```bash
export GOPATH="/home/ubuntu/go"
export GOROOT="/usr/local/go"

AppPath=/home/ubuntu/project/golang-web/src
AppPort=80
AppName=fangtan

. ./killApp.sh && killAppByPort $AppPort
cd $AppPath
rm -rf ./$AppName
echo æ›´æ–°è¿œç¨‹ä»£ç ä¸­...
git pull
$GOROOT/bin/go build -o fangtan
(sudo ./fangtan &)
echo 'finishï¼'
```

### åšå®¢ç¼–è¯‘åˆ°å°æ°´ç®¡é™æ€ç›®å½•

```bash
# é¡¹ç›®è·¯å¾„
blogPath=/home/ubuntu/project/jblog
cd $blogPath
hexo generate -f
echo 'build ok!'
```